{"ast":null,"code":"import io from 'socket.io-client';\n\nclass Socket {\n  constructor() {\n    this.socket = void 0;\n  }\n\n  send() {\n    this.socket.emit('message', 'hi');\n  }\n\n  connect(room) {\n    if (this.socket && this.socket.connected) {\n      return;\n    }\n\n    this.socket = io('http://localhost:8036');\n    return new Promise(resolve => {\n      this.socket.on('connect', () => {\n        let socketId = this.socket.io.engine.id;\n        this.socket.emit('subscribe', {\n          room: room,\n          socketId: socketId\n        });\n        this.socket.on('new user', data => {\n          this.socket.emit('newUserStart', {\n            to: data.socketId,\n            sender: socketId\n          });\n          pc.push(data.socketId);\n          init(true, data.socketId);\n        });\n        resolve(this.socket);\n      });\n    });\n  }\n\n  disconnect() {\n    this.socket.emit('disconnect');\n    this.socket.close();\n  }\n\n}\n\nconst instance = new Socket();\nexport default instance;","map":{"version":3,"sources":["/home/rimkus/WebstormProjects/UVIID/front/src/Socket.tsx"],"names":["io","Socket","socket","send","emit","connect","room","connected","Promise","resolve","on","socketId","engine","id","data","to","sender","pc","push","init","disconnect","close","instance"],"mappings":"AAAA,OAAOA,EAAP,MAAe,kBAAf;;AAGA,MAAOC,MAAP,CAAc;AAAA;AAAA,SACFC,MADE;AAAA;;AAGVC,EAAAA,IAAI,GAAG;AACH,SAAKD,MAAL,CAAYE,IAAZ,CAAiB,SAAjB,EAA4B,IAA5B;AACH;;AAEDC,EAAAA,OAAO,CAACC,IAAD,EAAO;AACV,QAAI,KAAKJ,MAAL,IAAe,KAAKA,MAAL,CAAYK,SAA/B,EAA0C;AACtC;AACH;;AACD,SAAKL,MAAL,GAAcF,EAAE,CAAC,uBAAD,CAAhB;AACA,WAAO,IAAIQ,OAAJ,CAAYC,OAAO,IAAI;AAC1B,WAAKP,MAAL,CAAYQ,EAAZ,CAAe,SAAf,EAA0B,MAAM;AAC5B,YAAIC,QAAQ,GAAG,KAAKT,MAAL,CAAYF,EAAZ,CAAeY,MAAf,CAAsBC,EAArC;AAEA,aAAKX,MAAL,CAAYE,IAAZ,CAAiB,WAAjB,EAA8B;AAC1BE,UAAAA,IAAI,EAAEA,IADoB;AAE1BK,UAAAA,QAAQ,EAAEA;AAFgB,SAA9B;AAKA,aAAKT,MAAL,CAAYQ,EAAZ,CAAe,UAAf,EAA4BI,IAAD,IAAQ;AAC/B,eAAKZ,MAAL,CAAYE,IAAZ,CAAiB,cAAjB,EAAiC;AAACW,YAAAA,EAAE,EAACD,IAAI,CAACH,QAAT;AAAmBK,YAAAA,MAAM,EAACL;AAA1B,WAAjC;AACAM,UAAAA,EAAE,CAACC,IAAH,CAAQJ,IAAI,CAACH,QAAb;AACAQ,UAAAA,IAAI,CAAC,IAAD,EAAOL,IAAI,CAACH,QAAZ,CAAJ;AACH,SAJD;AAMAF,QAAAA,OAAO,CAAC,KAAKP,MAAN,CAAP;AACH,OAfD;AAgBH,KAjBM,CAAP;AAkBH;;AAEDkB,EAAAA,UAAU,GAAG;AACT,SAAKlB,MAAL,CAAYE,IAAZ,CAAiB,YAAjB;AACA,SAAKF,MAAL,CAAYmB,KAAZ;AACH;;AAnCS;;AAsCd,MAAMC,QAAQ,GAAG,IAAIrB,MAAJ,EAAjB;AACA,eAAeqB,QAAf","sourcesContent":["import io from 'socket.io-client'\n\n\nclass  Socket {\n    private socket : any;\n\n    send() {\n        this.socket.emit('message', 'hi');\n    }\n\n    connect(room) {\n        if (this.socket && this.socket.connected) {\n            return ;\n        }\n        this.socket = io('http://localhost:8036');\n        return new Promise(resolve => {\n            this.socket.on('connect', () => {\n                let socketId = this.socket.io.engine.id;\n\n                this.socket.emit('subscribe', {\n                    room: room,\n                    socketId: socketId\n                });\n\n                this.socket.on('new user', (data)=>{\n                    this.socket.emit('newUserStart', {to:data.socketId, sender:socketId});\n                    pc.push(data.socketId);\n                    init(true, data.socketId);\n                });\n\n                resolve(this.socket);\n            });\n        });\n    }\n\n    disconnect() {\n        this.socket.emit('disconnect');\n        this.socket.close();\n    }\n}\n\nconst instance = new Socket();\nexport default instance\n"]},"metadata":{},"sourceType":"module"}
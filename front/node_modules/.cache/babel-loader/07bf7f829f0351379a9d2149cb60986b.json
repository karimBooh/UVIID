{"ast":null,"code":"import io from 'socket.io-client';\n\nclass Socket {\n  constructor() {\n    this.socket = void 0;\n    this.pc = void 0;\n  }\n\n  send() {\n    this.socket.emit('message', 'hi');\n  }\n\n  connect(room) {\n    if (this.socket && this.socket.connected) {\n      return;\n    }\n\n    this.socket = io('http://localhost:8080');\n    return new Promise(resolve => {\n      this.socket.on('connect', () => {\n        let socketId = this.socket.io.engine.id;\n        this.socket.emit('subscribe', {\n          room: room,\n          socketId: socketId\n        });\n        /*  this.socket.on('new user', (data)=>{\n              this.socket.emit('newUserStart', {to:data.socketId, sender:socketId});\n              pc.push(data.socketId);\n              init(true, data.socketId);\n          });*/\n\n        this.socket.on('ice candidates', async data => {\n          data.candidate ? await this.pc[data.sender].addIceCandidate(new RTCIceCandidate(data.candidate)) : '';\n        });\n        resolve(this.socket);\n      });\n    });\n  }\n\n  disconnect() {\n    this.socket.emit('disconnect');\n    this.socket.close();\n  }\n\n}\n\nconst instance = new Socket();\nexport default instance;","map":{"version":3,"sources":["/home/rimkus/WebstormProjects/UVIID/front/src/Socket.tsx"],"names":["io","Socket","socket","pc","send","emit","connect","room","connected","Promise","resolve","on","socketId","engine","id","data","candidate","sender","addIceCandidate","RTCIceCandidate","disconnect","close","instance"],"mappings":"AAAA,OAAOA,EAAP,MAAe,kBAAf;;AAGA,MAAOC,MAAP,CAAc;AAAA;AAAA,SACFC,MADE;AAAA,SAEFC,EAFE;AAAA;;AAIVC,EAAAA,IAAI,GAAG;AACH,SAAKF,MAAL,CAAYG,IAAZ,CAAiB,SAAjB,EAA4B,IAA5B;AACH;;AAEDC,EAAAA,OAAO,CAACC,IAAD,EAAgB;AACnB,QAAI,KAAKL,MAAL,IAAe,KAAKA,MAAL,CAAYM,SAA/B,EAA0C;AACtC;AACH;;AACD,SAAKN,MAAL,GAAcF,EAAE,CAAC,uBAAD,CAAhB;AACA,WAAO,IAAIS,OAAJ,CAAYC,OAAO,IAAI;AAC1B,WAAKR,MAAL,CAAYS,EAAZ,CAAe,SAAf,EAA0B,MAAM;AAC5B,YAAIC,QAAQ,GAAG,KAAKV,MAAL,CAAYF,EAAZ,CAAea,MAAf,CAAsBC,EAArC;AAEA,aAAKZ,MAAL,CAAYG,IAAZ,CAAiB,WAAjB,EAA8B;AAC1BE,UAAAA,IAAI,EAAEA,IADoB;AAE1BK,UAAAA,QAAQ,EAAEA;AAFgB,SAA9B;AAKF;;;;;;AAME,aAAKV,MAAL,CAAYS,EAAZ,CAAe,gBAAf,EAAiC,MAAOI,IAAP,IAAkB;AAC/CA,UAAAA,IAAI,CAACC,SAAL,GAAiB,MAAM,KAAKb,EAAL,CAAQY,IAAI,CAACE,MAAb,EAAqBC,eAArB,CAAqC,IAAIC,eAAJ,CAAoBJ,IAAI,CAACC,SAAzB,CAArC,CAAvB,GAAmG,EAAnG;AACH,SAFD;AAGAN,QAAAA,OAAO,CAAC,KAAKR,MAAN,CAAP;AACH,OAlBD;AAmBH,KApBM,CAAP;AAqBH;;AAEDkB,EAAAA,UAAU,GAAG;AACT,SAAKlB,MAAL,CAAYG,IAAZ,CAAiB,YAAjB;AACA,SAAKH,MAAL,CAAYmB,KAAZ;AACH;;AAvCS;;AA0Cd,MAAMC,QAAQ,GAAG,IAAIrB,MAAJ,EAAjB;AACA,eAAeqB,QAAf","sourcesContent":["import io from 'socket.io-client'\n\n\nclass  Socket {\n    private socket : any;\n    private pc : RTCPeerConnection[];\n\n    send() {\n        this.socket.emit('message', 'hi');\n    }\n\n    connect(room : string) {\n        if (this.socket && this.socket.connected) {\n            return ;\n        }\n        this.socket = io('http://localhost:8080');\n        return new Promise(resolve => {\n            this.socket.on('connect', () => {\n                let socketId = this.socket.io.engine.id;\n\n                this.socket.emit('subscribe', {\n                    room: room,\n                    socketId: socketId\n                });\n\n              /*  this.socket.on('new user', (data)=>{\n                    this.socket.emit('newUserStart', {to:data.socketId, sender:socketId});\n                    pc.push(data.socketId);\n                    init(true, data.socketId);\n                });*/\n\n                this.socket.on('ice candidates', async (data:any)=>{\n                    data.candidate ? await this.pc[data.sender].addIceCandidate(new RTCIceCandidate(data.candidate)) : '';\n                });\n                resolve(this.socket);\n            });\n        });\n    }\n\n    disconnect() {\n        this.socket.emit('disconnect');\n        this.socket.close();\n    }\n}\n\nconst instance = new Socket();\nexport default instance\n"]},"metadata":{},"sourceType":"module"}